# 一期商城实战

## 商业模式（CEO的视野）

不管任何行业，不一定是互联网项目，先解决的是商业模式的问题：如下3个问题

智商

情商 “商业模式”

1、客户从哪来
2、怎么让他成交
3、怎么让他重复成交

抓潜 - 成交 - 鱼塘

## 需求模式（产品经理视野）

产品经理的关注点：怎么实现老板的商业模式

   抓潜 ———————————————— 成交 ———————————————— 鱼塘
(注册，活动)     (商品维护、下订单、活动)     (相关推荐、活动)

## 设计落地（产品经理视野）

客户（前端）
    注册
    选择产品
    信息维护
    
管理员（后端）
    发布产品
    发布活动
    维护客户信息
    
## 架构落地（架构师的视野）

开源
    并发量提升
    易用性
    界面说明

节流
    可扩展性、高可用性
    代码规范（注释等）
    抽象封装
    
## 设计文档需要考虑的地方

弊病：本末倒置，忘记全局目标

思考：设计一个用户注册的界面模型与表结构
    既然前面已经知道了商业模式第一步为抓潜，也应该很友好，那么注册界面应该很简单
    
## fastdfs
    
    分布式的文件系统
    1、如果文件很多，一台服务器存不下，必然需要多台服务器(分布式)
    
    fastdfs分布存储之后有个同步时间延迟，如果上传之后马上就刷新图片地址，有时候会取不到，这种如何解决？
    
## 推荐商品

    定时任务，抓取一段时间内热销的商品(产品id和产品被卖了多少次)
    redis

## 读写分离

    2个数据库，一个写，一个读
    AOP切面拦截读写方法并分配到主从数据库中
    采用Stack<>
    
## 秒杀

    减少数据库压力，存到redis
    秒杀订单放入mq
    submitOrder里面sleep不会造成问题吗？
    
## 单点登录 Oauth2